<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
  <header class="header">
    <div class="container">
      <h1 class="logo">üé¨ –§–∏–ª—å–º–æ—Ç–µ–∫–∞</h1>
      <nav class="auth-nav">
        {% if user.is_authenticated %}
          <a href="{% url 'profile' %}" class="btn profile-btn">üë§ {{ user.username }}</a>
          <a href="{% url 'logout' %}" class="btn logout-btn">üö™ –í—ã–π—Ç–∏</a>
        {% else %}
          <a href="{% url 'login' %}" class="btn login-btn">üîë –í–æ–π—Ç–∏</a>
          <a href="{% url 'register' %}" class="btn register-btn">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <main class="main-content">
    <div class="container1">
      <h2>–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫</h2>
      <form method="GET">
        <input type="text" name="semantic_q" placeholder="–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –∏—â–µ—Ç–µ..." value="{{ query }}" class="search-input">
        <button type="submit" class="search-btn">–ù–∞–π—Ç–∏ –ø–æ —Å–º—ã—Å–ª—É</button>
      </form>

      <hr>

      {% if movies %}
        <div class="movie-grid">
          {% for movie in movies %}
            <article class="movie-card">
              <div class="movie-poster">
                  <img src="{% static 'posters/' %}{{ movie.poster|default:'no-image.jpg' }}" 
                       alt="{{ movie.title }}" 
                       loading="lazy">
              </div>
              <div class="movie-info">
                  <h3 class="movie-title">
                      <a href="{% url 'movie_detail' movie.id %}">{{ movie.title }}</a>
                      <span class="movie-year">({{ movie.year }})</span>
                  </h3>
                  <div class="movie-meta">
                      <p class="movie-director">üé¨ {{ movie.author }}</p>
                      <p class="movie-genres">üè∑Ô∏è {{ movie.user_tags }}</p>
                  </div>
              </div>
            </article>
          {% endfor %}
        </div>
      {% else %}
        <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
      {% endif %}
    </div>
  </main>

</body>
</html>