<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="icon" href="{% static 'cut.png' %}">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo">üé¨ –§–∏–ª—å–º–æ—Ç–µ–∫–∞</h1>
            <nav class="auth-nav">
                {% if user.is_authenticated %}
                    <a href="{% url 'profile' %}" class="btn profile-btn">üë§ {{ user.username }}</a>
                    <a href="{% url 'logout' %}" class="btn logout-btn">üö™ –í—ã–π—Ç–∏</a>
                {% else %}
                    <a href="{% url 'login' %}" class="btn login-btn">üîë –í–æ–π—Ç–∏</a>
                    <a href="{% url 'register' %}" class="btn register-btn">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </nav>
        </div>
    </header>
    <div class="profile_all">
        <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
        <div class="name">
            <h3>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h3>
            <h3> {{ user.username }}</h3>
        </div>
        </head>
            <main class="main-content">
                <button id="scrollToTopBtn" onclick="scrollToTop()" style="display:none;">‚Üë –ù–∞–≤–µ—Ä—Ö</button>
                <div class="container1">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
                    <a href="{% url 'movie_list' %}" class="btn back-btn">‚Üê –ö —Å–ø–∏—Å–∫—É —Ñ–∏–ª—å–º–æ–≤</a>
                    <h2 class="recommendations-title">–í–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                    
                    {% if movies %}
                        <div class="movie-grid">
                            {% for movie in movies %}
                            <article class="movie-card">
                                <div class="movie-poster">
                                    <img src="{% static 'posters/' %}{{ movie.poster|default:'no-image.jpg' }}" 
                                         alt="{{ movie.title }}" 
                                         loading="lazy">
                                </div>
                                <div class="movie-info">
                                    <h3 class="movie-title">
                                        <a href="{% url 'movie_detail' movie.id %}">{{ movie.title }}</a>
                                        <span class="movie-year">({{ movie.year }})</span>
                                    </h3>
                                    <div class="movie-meta">
                                        <p class="movie-director">üé¨ {{ movie.author }}</p>
                                        <p class="movie-genres">üè∑Ô∏è {{ movie.user_tags }}</p>
                                    </div>
                                </div>
                            </article>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="no-results">
                            <img src="{% static 'images/no-results.svg' %}" 
                                 alt="–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" 
                                 class="no-results-image">
                            <h3 class="no-results-title">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</h3>
                            <p class="no-results-text">–ü–æ—Å—Ç–∞–≤—å—Ç–µ –ª–∞–π–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ñ–∏–ª—å–º–∞–º, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ.</p>
                        </div>
                    {% endif %}
                </div>

            
            <script>
                // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
                window.onscroll = function() {
                    const scrollToTopBtn = document.getElementById('scrollToTopBtn');
                    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                        scrollToTopBtn.style.display = "flex"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                    } else {
                        scrollToTopBtn.style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                    }
                };
        
                // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–≤–µ—Ä—Ö
                function scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth' // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
                    });
                }
            </script>
        </div>
    </div>
</body>
</html>